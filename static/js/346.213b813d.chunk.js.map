{"version":3,"file":"static/js/346.213b813d.chunk.js","mappings":"mTACA,EAA0B,yBAA1B,EAA4D,wBAA5D,EAAkG,6B,SCqIlG,EA9GoB,WAClB,IAAMA,GAAWC,EAAAA,EAAAA,MACjB,GAA+BC,EAAAA,EAAAA,UAAS,GAAxC,eAAOC,EAAP,KAAoBC,EAApB,KACA,GAAsCF,EAAAA,EAAAA,WAAS,GAA/C,eAAOG,EAAP,KAAqBC,EAArB,KACA,GAAsCJ,EAAAA,EAAAA,WAAS,GAA/C,eAAOK,EAAP,KAAqBC,EAArB,KACA,GAAkCN,EAAAA,EAAAA,YAAlC,eAAOO,EAAP,KAAkBC,EAAlB,KACA,GACEC,EAAAA,EAAAA,KAAY,SAACC,GAAD,MAAuB,CACjCC,OAAQD,EAAME,KACdC,WAAYH,EAAMI,MAAMD,WACxBE,SAAUL,EAAMI,MAAMC,SACtBC,QAASN,EAAMI,MAAMA,MACrBG,oBAAqBP,EAAMI,MAAMI,yBALvB,IADNP,EAAR,EAAQA,OAAQE,EAAhB,EAAgBA,WAAYG,EAA5B,EAA4BA,QAASC,EAArC,EAAqCA,oBAAqBF,EAA1D,EAA0DA,SAQlDI,GAAMC,EAAAA,EAAAA,MAAND,GAERE,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,GAASxB,EAAUG,EAAa,SAAKsB,GAAW,EACjD,GAAE,CAACzB,IAEJ,IAUM0B,GAAaC,EAAAA,EAAAA,GAAoBT,EAAQU,OAAQX,GAEvD,GAAwCY,EAAAA,EAAAA,GACtCL,EAAAA,EACArB,EACAc,GACA,GAJMa,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,YAexB,OAAKlB,EAIDE,GACK,SAACiB,EAAA,EAAD,CAAQjB,WAAYA,KAI3B,gBAAKkB,UAAWC,EAAhB,UACInB,IACA,4BACE,iBAAKkB,UAAWC,EAAhB,yBAA6ChB,EAAQU,OAArD,QACA,SAACO,EAAA,EAAD,CACEC,YAAaf,EAAE,gBACfS,eAAgBA,EAChBC,YAAaA,EACbM,WAAYN,KAEd,eAAIE,UAAWC,EAAf,SACGhB,EAAQoB,KAAI,SAACC,EAAQC,GAAT,OACX,SAACC,EAAA,EAAD,CACEC,KAAMH,EACNI,YAAa,WACX3C,GAAS4C,EAAAA,EAAAA,IAAwBL,EAAOM,IACzC,EACDC,cAAe,kBA9BXD,EA8B0BN,EAAOM,QA7BjD7C,GAAS+C,EAAAA,EAAAA,IAA0BF,IADpB,IAACA,CA8BW,EACf1B,oBAAqBA,EACrB6B,iBAAkB,kBAvDP,SAACvC,GACxBH,GAAc,GACdI,EAAaD,GACbT,GAASiD,EAAAA,EAAAA,IAAsB,CAAEJ,GAAE,OAAEpC,QAAF,IAAEA,OAAF,EAAEA,EAAWoC,KACjD,CAmDqCG,CAAiBT,EAAvB,GACbC,EAAQD,EAAOW,WATX,MAadxB,EAAa,IACZ,SAACyB,EAAA,EAAD,CACEzB,WAAYA,EACZvB,YAAaA,EACbiD,iBA7Ca,SAACC,GACxBrD,GAASsD,EAAAA,EAAAA,IAAqBD,EAAYpC,OAAUQ,GAAW,GAChE,EA4CWrB,QAASA,MAGV2B,IAAgBb,EAAQU,SACzB,SAAC2B,EAAA,EAAD,CAAYC,KAAMnC,EAAE,oBAEtB,SAACoC,EAAA,EAAD,CACEC,OAAQrD,EACRsD,YAnEgB,WACxBrD,GAAc,EACf,EAkESE,cAAeA,EACfC,UAAWA,KAEb,SAACmD,EAAA,EAAD,CACEF,OAAQnD,EACRsD,UAAU,eACVC,SAAUC,SAASC,KACnBL,YAAa,kBAAMnD,GAAc,EAApB,EACbC,UAAWA,UAtDZ,SAAC,KAAD,CAAUwD,GAAG,UA4DvB,C","sources":["webpack://my-app/./src/components/friends/Friends.module.css?f13a","components/friends/Friends.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Friends_wrapper__2EdIQ\",\"header\":\"Friends_header__MBbvf\",\"itemWrapper\":\"Friends_itemWrapper__QfSbn\"};","import { FC, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport Popper from 'src/components/common/atoms/popper/Popper';\nimport SearchField from 'src/components/common/atoms/searchField/SearchField';\nimport UsersPagination from 'src/components/common/atoms/usersPagination/UsersPagination';\nimport DialogModal from 'src/components/common/molecules/dialogModal/DialogModal';\nimport EmptyState from 'src/components/common/molecules/EmptyState/EmptyState';\nimport UserItem from 'src/components/common/molecules/userItem/UserItem';\nimport Loader from 'src/components/loader/Loader';\nimport { useSearch } from 'src/hooks/useSearch';\nimport { getMessagesListAction } from 'src/redux/dialogsReducer';\nimport { RootState } from 'src/redux/redux-store';\nimport {\n  followUsersThunkCreator,\n  getUsersThunkCreator,\n  unfollowUsersThunkCreator,\n} from 'src/redux/usersReducer';\nimport { UserType } from 'src/types';\nimport { calculatePagesCount, getUsers } from 'src/utils/users';\n\nimport classes from './Friends.module.css';\n\nconst Friends: FC = () => {\n  const dispatch = useDispatch();\n  const [currentPage, setPage] = useState(1);\n  const [isDialogOpen, setDialogOpen] = useState(false);\n  const [isPopperOpen, setPopperOpen] = useState(false);\n  const [companion, setCompanion] = useState<UserType>();\n  const { isAuth, isFetching, friends, followingInProgress, pageSize } =\n    useSelector((state: RootState) => ({\n      isAuth: state.auth,\n      isFetching: state.users.isFetching,\n      pageSize: state.users.pageSize,\n      friends: state.users.users,\n      followingInProgress: state.users.followingInProgressUsers,\n    }));\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    getUsers(dispatch, currentPage, 100, undefined, true);\n  }, [dispatch]);\n\n  const handleDialogOpen = (companion?: UserType) => {\n    setDialogOpen(true);\n    setCompanion(companion);\n    dispatch(getMessagesListAction({ id: companion?.id as number }));\n  };\n\n  const handleDialogClose = () => {\n    setDialogOpen(false);\n  };\n\n  const pagesCount = calculatePagesCount(friends.length, pageSize);\n\n  const { setSearchValue, searchValue } = useSearch(\n    getUsers,\n    currentPage,\n    pageSize,\n    true\n  );\n\n  const handlePageChange = (pageNumber: number) => {\n    dispatch(getUsersThunkCreator(pageNumber, pageSize, undefined, true));\n  };\n\n  const unfollow = (id: number) => {\n    dispatch(unfollowUsersThunkCreator(id));\n  };\n\n  if (!isAuth) {\n    return <Redirect to=\"/Login\" />;\n  }\n\n  if (isFetching) {\n    return <Loader isFetching={isFetching} />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      {!isFetching && (\n        <div>\n          <div className={classes.header}>All friends({friends.length})</div>\n          <SearchField\n            placeholder={t('users.search')}\n            setSearchValue={setSearchValue}\n            searchValue={searchValue}\n            isSearch={!!searchValue}\n          />\n          <ul className={classes.itemWrapper}>\n            {friends.map((friend, index) => (\n              <UserItem\n                user={friend}\n                followUsers={() => {\n                  dispatch(followUsersThunkCreator(friend.id as number));\n                }}\n                unfollowUsers={() => unfollow(friend.id as number)}\n                followingInProgress={followingInProgress}\n                handleDialogOpen={() => handleDialogOpen(friend)}\n                key={index + friend.toString()}\n              />\n            ))}\n          </ul>\n          {pagesCount > 1 && (\n            <UsersPagination\n              pagesCount={pagesCount}\n              currentPage={currentPage}\n              handlePageChange={handlePageChange}\n              setPage={setPage}\n            />\n          )}\n          {!!searchValue && !friends.length && (\n            <EmptyState text={t('users.nothing')} />\n          )}\n          <DialogModal\n            isOpen={isDialogOpen}\n            handleClose={handleDialogClose}\n            setPopperOpen={setPopperOpen}\n            companion={companion as UserType}\n          />\n          <Popper\n            isOpen={isPopperOpen}\n            placement=\"bottom-start\"\n            anchorEl={document.body}\n            handleClose={() => setPopperOpen(false)}\n            companion={companion as UserType}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Friends;\n"],"names":["dispatch","useDispatch","useState","currentPage","setPage","isDialogOpen","setDialogOpen","isPopperOpen","setPopperOpen","companion","setCompanion","useSelector","state","isAuth","auth","isFetching","users","pageSize","friends","followingInProgress","followingInProgressUsers","t","useTranslation","useEffect","getUsers","undefined","pagesCount","calculatePagesCount","length","useSearch","setSearchValue","searchValue","Loader","className","classes","SearchField","placeholder","isSearch","map","friend","index","UserItem","user","followUsers","followUsersThunkCreator","id","unfollowUsers","unfollowUsersThunkCreator","handleDialogOpen","getMessagesListAction","toString","UsersPagination","handlePageChange","pageNumber","getUsersThunkCreator","EmptyState","text","DialogModal","isOpen","handleClose","Popper","placement","anchorEl","document","body","to"],"sourceRoot":""}