"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[644],{2644:function(e,s,n){n.r(s),n.d(s,{default:function(){return K}});var t=n(4942),a=n(9439),r=n(2791),i=n(9230),c=n(364),d=n(8931),o=n(1523),l=n(2271),u=n(5152),h=n(1694),m=n.n(h),g=n(1686),_=n(8805),j=n(4420),x=n(8254),f=n(3811),v=n(7205),p=n(8955),C=n(6128),N="AddMessageForm_addMessageForm__Ex7F4",Z="AddMessageForm_emojiContainer__GgOEq",k=n(184),y=function(){var e=(0,r.useState)(""),s=(0,a.Z)(e,2),n=s[0],t=s[1],d=(0,c.v9)((function(e){return e.chat.status})),o=(0,c.I0)(),l=(0,i.$G)().t,u=function(){n&&(o((0,C.q2)(n)),t(""))},h=(0,r.useState)(!1),m=(0,a.Z)(h,2),y=m[0],P=m[1];return(0,k.jsxs)("div",{className:N,children:[(0,k.jsx)(j.Z,{placeholder:l("chat.enter"),multiline:!0,maxRows:4,value:n,onChange:function(e){return t(e.currentTarget.value)},fullWidth:!0,onKeyDown:function(e){e.ctrlKey&&"Enter"===e.key?t("".concat(n,"\r\n")):"Enter"!==e.key||e.shiftKey||(e.preventDefault(),u())},autoFocus:!0,endAdornment:(0,k.jsx)(x.Z,{position:"end",children:(0,k.jsx)(f.Z,{onClick:function(){P((function(e){return!e}))},edge:"end",children:(0,k.jsx)(_.Z,{})})})}),y&&(0,k.jsx)("div",{className:Z,children:(0,k.jsx)(p.ZP,{onEmojiClick:function(e){t(n+e.emoji)},autoFocusSearch:!1})}),(0,k.jsx)(v.Z,{onClick:u,disabled:"ready"!==d||!n.trim().length,variant:"contained",endIcon:(0,k.jsx)(g.Z,{}),children:l("chat.send")})]})},P=n(423),F=n(3328),I="ChatPage_messagesWrapper__NFx-O",E="ChatPage_avatar__6lEId",M="ChatPage_messageContainer__+VkiS",w="ChatPage_deleted__+jqg7",A="ChatPage_messageBlock__E3NSy",O="ChatPage_author__I+V9m",S="ChatPage_message__1C9-4",b="ChatPage_iconWrapper__-ISCr",q="ChatPage_icon__vtmug",G="ChatPage_recovery__dee87",K=(0,r.memo)((function(){var e=(0,c.v9)((function(e){return e.auth})).isAuth,s=(0,c.v9)((function(e){return e.chat.status}));return e?(0,k.jsxs)(k.Fragment,{children:["pending"===s&&(0,k.jsx)(P.Z,{isFetching:"pending"===s}),"ready"===s&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(L,{}),(0,k.jsx)(y,{})]})]}):(0,k.jsx)(d.l_,{to:"/Login"})})),L=(0,r.memo)((function(){var e=(0,c.v9)((function(e){return e.chat.messages})),s=(0,r.useRef)(null);return(0,r.useEffect)((function(){var e;null===(e=s.current)||void 0===e||e.scrollIntoView()}),[e]),(0,k.jsxs)("div",{className:I,children:[e.map((function(e){return(0,k.jsx)(V,{userId:e.userId,message:e.message,photo:e.photo,userName:e.userName,id:e.id,deleted:e.deleted,deletedMessage:e.deletedMessage},e.id)})),(0,k.jsx)("div",{ref:s})]})})),V=(0,r.memo)((function(e){var s=e.message,n=e.userName,r=e.photo,d=e.userId,h=e.id,g=e.deleted,_=e.deletedMessage,j=(0,c.I0)(),x=(0,i.$G)().t,f=g&&_?_.split("."):[],v=(0,a.Z)(f,2),p=v[0],N=v[1];return(0,k.jsxs)("div",{className:m()(M,(0,t.Z)({},w,g)),children:[(0,k.jsxs)("div",{className:A,children:[!g&&(0,k.jsx)(o.OL,{to:"/profile/"+d,children:(0,k.jsx)("img",{src:null!==r&&void 0!==r?r:F,alt:n,className:E})}),(0,k.jsxs)("div",{children:[!g&&(0,k.jsx)(o.OL,{to:"/profile/"+d,children:(0,k.jsx)("div",{className:O,children:n})}),!g&&(0,k.jsx)("div",{className:S,children:s}),g&&(0,k.jsxs)("div",{className:S,children:[(0,k.jsx)("span",{children:p}),"."," ",(0,k.jsx)("span",{className:G,onClick:function(){j(C.ON.restoreMessageActionCreator(h))},role:"button",children:N})]})]})]}),!g&&(0,k.jsx)("div",{className:b,children:(0,k.jsx)(u.Z,{title:x("chat.delete"),arrow:!0,placement:"bottom-start",children:(0,k.jsx)(l.Z,{onClick:function(){j(C.ON.deleteMessageActionCreator(h))},className:q})})})]})}))},3328:function(e,s,n){e.exports=n.p+"static/media/avatar.5a2d86a614875de76929.png"}}]);
//# sourceMappingURL=644.e57db413.chunk.js.map