{"version":3,"file":"static/js/346.64111534.chunk.js","mappings":"0SACA,EAA0B,yBAA1B,EAA4D,wBAA5D,EAAkG,6B,SC8HlG,EAvGoB,WAClB,IAAMA,GAAWC,EAAAA,EAAAA,MACjB,GAA+BC,EAAAA,EAAAA,UAAS,GAAxC,eAAOC,EAAP,KAAoBC,EAApB,KACA,GAAsCF,EAAAA,EAAAA,WAAS,GAA/C,eAAOG,EAAP,KAAqBC,EAArB,KACA,GAAsCJ,EAAAA,EAAAA,WAAS,GAA/C,eAAOK,EAAP,KAAqBC,EAArB,KACA,GAAkCN,EAAAA,EAAAA,YAAlC,eAAOO,EAAP,KAAkBC,EAAlB,KACA,GACEC,EAAAA,EAAAA,KAAY,SAACC,GAAD,MAAuB,CACjCC,OAAQD,EAAME,KACdC,WAAYH,EAAMI,MAAMD,WACxBE,SAAUL,EAAMI,MAAMC,SACtBC,QAASN,EAAMI,MAAMA,MACrBG,oBAAqBP,EAAMI,MAAMI,yBALvB,IADNP,EAAR,EAAQA,OAAQE,EAAhB,EAAgBA,WAAYG,EAA5B,EAA4BA,QAASC,EAArC,EAAqCA,oBAAqBF,EAA1D,EAA0DA,SAQlDI,GAAMC,EAAAA,EAAAA,MAAND,GAERE,EAAAA,EAAAA,YAAU,YACRC,EAAAA,EAAAA,GAASxB,EAAUG,EAAa,SAAKsB,GAAW,EACjD,GAAE,CAACzB,IAEJ,IASM0B,GAAaC,EAAAA,EAAAA,GAAoBT,EAAQU,OAAQX,GAEvD,GAAwCY,EAAAA,EAAAA,GACtCL,EAAAA,EACArB,EACAc,GACA,GAJMa,EAAR,EAAQA,eAAgBC,EAAxB,EAAwBA,YAexB,OAAKlB,EAIDE,GACK,SAACiB,EAAA,EAAD,CAAQjB,WAAYA,KAI3B,gBAAKkB,UAAWC,EAAhB,UACInB,IACA,iCACE,iBAAKkB,UAAWC,EAAhB,yBAA6ChB,EAAQU,OAArD,QACA,SAACO,EAAA,EAAD,CACEC,YAAaf,EAAE,gBACfS,eAAgBA,EAChBC,YAAaA,EACbM,WAAYN,KAEd,eAAIE,UAAWC,EAAf,SACGhB,EAAQoB,KAAI,SAACC,GAAD,OACX,SAACC,EAAA,EAAD,CACEC,KAAMF,EACNG,YAAa,WACX1C,GAAS2C,EAAAA,EAAAA,IAAwBJ,EAAOK,IACzC,EACDC,cAAe,kBA9BXD,EA8B0BL,EAAOK,QA7BjD5C,GAAS8C,EAAAA,EAAAA,IAA0BF,IADpB,IAACA,CA8BW,EACfzB,oBAAqBA,EACrB4B,iBAAkB,kBAtDP,SAACtC,GACxBH,GAAc,GACdI,EAAaD,EACd,CAmDqCsC,CAAiBR,EAAvB,IACbS,EAAAA,EAAAA,KATI,MAadtB,EAAa,IACZ,SAACuB,EAAA,EAAD,CACEvB,WAAYA,EACZvB,YAAaA,EACb+C,iBA7Ca,SAACC,GACxBnD,GAASoD,EAAAA,EAAAA,IAAqBD,EAAYlC,OAAUQ,GAAW,GAChE,EA4CWrB,QAASA,MAGV2B,IAAgBb,EAAQU,SACzB,SAACyB,EAAA,EAAD,CAAYC,KAAMjC,EAAE,oBAEtB,SAACkC,EAAA,EAAD,CACElD,aAAcA,EACdG,cAAeA,EACfuC,iBApEgB,WACxBzC,GAAc,EACf,EAmESG,UAAWA,EACXF,aAAcA,UAhDf,SAAC,KAAD,CAAUiD,GAAG,UAsDvB,C","sources":["webpack://my-app/./src/components/friends/Friends.module.css?f13a","components/friends/Friends.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Friends_wrapper__2EdIQ\",\"header\":\"Friends_header__MBbvf\",\"itemWrapper\":\"Friends_itemWrapper__QfSbn\"};","import { FC, useEffect, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { v4 as uuidv4 } from 'uuid';\n\nimport Loader from 'src/components/common/atoms/loader/Loader';\nimport SearchField from 'src/components/common/atoms/searchField/SearchField';\nimport UsersPagination from 'src/components/common/atoms/usersPagination/UsersPagination';\nimport EmptyState from 'src/components/common/molecules/EmptyState/EmptyState';\nimport DialogModalWrapper from 'src/components/common/molecules/dialogModalWrapper/DialogModalWrapper';\nimport UserItem from 'src/components/common/molecules/userItem/UserItem';\nimport { useSearch } from 'src/hooks/useSearch';\nimport { RootState } from 'src/redux/redux-store';\nimport {\n  followUsersThunkCreator,\n  getUsersThunkCreator,\n  unfollowUsersThunkCreator,\n} from 'src/redux/usersReducer';\nimport { UserType } from 'src/types';\nimport { calculatePagesCount, getUsers } from 'src/utils/users';\n\nimport classes from './Friends.module.css';\n\nconst Friends: FC = () => {\n  const dispatch = useDispatch();\n  const [currentPage, setPage] = useState(1);\n  const [isDialogOpen, setDialogOpen] = useState(false);\n  const [isPopperOpen, setPopperOpen] = useState(false);\n  const [companion, setCompanion] = useState<UserType>();\n  const { isAuth, isFetching, friends, followingInProgress, pageSize } =\n    useSelector((state: RootState) => ({\n      isAuth: state.auth,\n      isFetching: state.users.isFetching,\n      pageSize: state.users.pageSize,\n      friends: state.users.users,\n      followingInProgress: state.users.followingInProgressUsers,\n    }));\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    getUsers(dispatch, currentPage, 100, undefined, true);\n  }, [dispatch]);\n\n  const handleDialogOpen = (companion?: UserType) => {\n    setDialogOpen(true);\n    setCompanion(companion);\n  };\n\n  const handleDialogClose = () => {\n    setDialogOpen(false);\n  };\n\n  const pagesCount = calculatePagesCount(friends.length, pageSize);\n\n  const { setSearchValue, searchValue } = useSearch(\n    getUsers,\n    currentPage,\n    pageSize,\n    true\n  );\n\n  const handlePageChange = (pageNumber: number) => {\n    dispatch(getUsersThunkCreator(pageNumber, pageSize, undefined, true));\n  };\n\n  const unfollow = (id: number) => {\n    dispatch(unfollowUsersThunkCreator(id));\n  };\n\n  if (!isAuth) {\n    return <Redirect to=\"/Login\" />;\n  }\n\n  if (isFetching) {\n    return <Loader isFetching={isFetching} />;\n  }\n\n  return (\n    <div className={classes.wrapper}>\n      {!isFetching && (\n        <>\n          <div className={classes.header}>All friends({friends.length})</div>\n          <SearchField\n            placeholder={t('users.search')}\n            setSearchValue={setSearchValue}\n            searchValue={searchValue}\n            isSearch={!!searchValue}\n          />\n          <ul className={classes.itemWrapper}>\n            {friends.map((friend) => (\n              <UserItem\n                user={friend}\n                followUsers={() => {\n                  dispatch(followUsersThunkCreator(friend.id as number));\n                }}\n                unfollowUsers={() => unfollow(friend.id as number)}\n                followingInProgress={followingInProgress}\n                handleDialogOpen={() => handleDialogOpen(friend)}\n                key={uuidv4()}\n              />\n            ))}\n          </ul>\n          {pagesCount > 1 && (\n            <UsersPagination\n              pagesCount={pagesCount}\n              currentPage={currentPage}\n              handlePageChange={handlePageChange}\n              setPage={setPage}\n            />\n          )}\n          {!!searchValue && !friends.length && (\n            <EmptyState text={t('users.nothing')} />\n          )}\n          <DialogModalWrapper\n            isDialogOpen={isDialogOpen}\n            setPopperOpen={setPopperOpen}\n            handleDialogOpen={handleDialogClose}\n            companion={companion as UserType}\n            isPopperOpen={isPopperOpen}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Friends;\n"],"names":["dispatch","useDispatch","useState","currentPage","setPage","isDialogOpen","setDialogOpen","isPopperOpen","setPopperOpen","companion","setCompanion","useSelector","state","isAuth","auth","isFetching","users","pageSize","friends","followingInProgress","followingInProgressUsers","t","useTranslation","useEffect","getUsers","undefined","pagesCount","calculatePagesCount","length","useSearch","setSearchValue","searchValue","Loader","className","classes","SearchField","placeholder","isSearch","map","friend","UserItem","user","followUsers","followUsersThunkCreator","id","unfollowUsers","unfollowUsersThunkCreator","handleDialogOpen","uuidv4","UsersPagination","handlePageChange","pageNumber","getUsersThunkCreator","EmptyState","text","DialogModalWrapper","to"],"sourceRoot":""}